{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags %} {# this is a filter #}
{% load verbose_names %}

{% block title %}
RBA Case Study
{% endblock %}

{% block content %}

    <!-- Page Heading -->
    <div class="d-sm-flex align-items-center justify-content-between mb-4">
        <h1 class="h3 mb-0 text-gray-800">{{ title }}</h1>
    </div>

    <!-- Content Row -->
    <div class="row">

        <!-- Phase 1  -->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-primary shadow h-100 py-2">
                <a class="text-gray-800" style="display:block" href="#phase_1">
                    <div class="card-body"> 
                        <div class="row no-gutters align-items-center">
                            <div class="col mr-2">
                                <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                    Phase 1</div>
                                <div class="h5 mb-0 font-weight-bold text-gray-800">  Context </div>
                            </div>
                            <div class="col-auto">
                                <i class="fas fa-info fa-2x text-gray-300"></i>
                            </div>
                        </div>
                    </div>
                </a>    
            </div>
        </div>

        <!-- Phase 2 -->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-success shadow h-100 py-2">
                <a class="text-gray-800" href="#phase_2">
                    <div class="card-body">
                        <div class="row no-gutters align-items-center">
                            <div class="col mr-2">
                                <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                    Phase 2</div>
                                <div class="h5 mb-0 font-weight-bold text-gray-800">  Risk Identification </div>                                        </div>
                            <div class="col-auto">
                                <i class="fas fa-search fa-2x text-gray-300"></i>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
        </div>

        <!-- Phase 3 -->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-info shadow h-100 py-2">
                <a class="text-gray-800" href="#phase_3">
                    <div class="card-body">
                        <div class="row no-gutters align-items-center">
                            <div class="col mr-2">
                                <div class="text-xs font-weight-bold text-info text-uppercase mb-1">Phase 3
                                </div>
                                <div class="row no-gutters align-items-center">
                                    <div class="col-auto">
                                        <div class="h5 mb-0 font-weight-bold text-gray-800">  Risk Analysis </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-auto">
                                <i class="fas fa-chart-bar fa-2x text-gray-300"></i>
                            </div>
                        </div>
                    </div>
                </a>    
            </div>
        </div>

        <!-- Phase 4 -->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-warning shadow h-100 py-2">
                <a class="text-gray-800" href="#phase_4">
                    <div class="card-body">
                        <div class="row no-gutters align-items-center">
                            <div class="col mr-2">
                                <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                                    Phase 4</div>
                                <div class="h5 mb-0 font-weight-bold text-gray-800">Risk Evaluation</div>
                            </div>
                            <div class="col-auto">
                                <i class="fas fa-clipboard-check fa-2x text-gray-300"></i>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
        </div>
    </div>

    <!-- Content Row -->

    <div class="row">

        <!-- Map -->
        <div class="col-xl-12 col-lg-12">
            <div class="card shadow mb-4" >
                <!-- Mappa - Dropdown -->
                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                    <h6 class="m-0 font-weight-bold text-primary">Map of the area</h6>   
                </div>
                <!-- Card Body -->
                <div class="card-body" style="padding: 0rem !important; height: 33rem;">
                    <div class="chart-area">
                        <iframe class="img-fluid px-3 px-sm-4 mt-3 mb-4" style="width:inherit; height: 33rem; border:0ch; margin: 0rem !important; padding: 0rem !important"  src="{{ object.map_embed_url}}"></iframe>
                    </div>
                </div>
            </div>
            

        </div>
        
        <!-- Pilot Site -->
        <!-- <div class="col-xl-5 col-lg-3">

            <div class="card shadow mb-4">
                    <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                        <h6 class="m-0 font-weight-bold text-primary">Pilot Site</h6>   
                    </div>
                    <div class="text-center">
                        {% image object.image width-580 %}
                    </div>
            </div>
            
        </div> -->
        

    </div>
    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">Descrizione Generale del CS</h6>
        </div>
        <div class="card-body">
            {{ object.description |slice:":400" }}
            <span id="dots">...</span>
            <span id="more">{{ object.description |slice:"400:"}}</span>
            <button id="btn1" onclick="myFunction()"><i class="fas fa-chevron-right"></i></button>
        </div>


    </div>
    <!-- Content Row -->
    
    <div class="row">
        <!-- Phase 1 panel-->
        <div class="col-lg-12 mb-4">
            <div class="card bg-primary text-white shadow">
                <div id="phase_1"class="card-body">
                    Context
                    <div class="text-white-50 small">Phase 1</div>
                </div>
            </div>
        </div>
        <!-- left column phase1 -->
        <div class="col-lg-7 mb-4">
           
            <div class="row">
                 
                <div class="col-lg-12 mb-4">
                    <!-- 1.1 -->
                    <div class="card shadow mb-4">
                        <div class="card-header py-3">
                            <h6 class="m-0 font-weight-bold text-primary">{% get_verbose_field_name object "study_area" %}</h6>
                        </div>
                        <div class="card-body"> 
                            {{ object.study_area |slice:":380" }}
                            <span id="dots2">...</span>
                            <span id="more2">{{ object.study_area |slice:"380:"}}</span>
                            <button id="btn2" onclick="myFunction2()"><i class="fas fa-chevron-right"></i></button>
                        </div>
                    </div>
                    <!-- 1.2 -->
                    <div class="card shadow mb-4">
                        <div class="card-header py-3">
                            <h6 class="m-0 font-weight-bold text-primary">{% get_verbose_field_name object "policy_objectives" %}</h6>
                        </div>
                        <div class="card-body"> 
                            {{ object.policy_objectives  |slice:":380" }}
                            <span id="dots3">...</span>
                            <span id="more3">{{ object.policy_objectives |slice:"380:"}}</span>
                            <button id="btn3" onclick="myFunction3()"><i class="fas fa-chevron-right"></i></button>
                        </div>
                        <div class="card-body">
                            <h6 class="m-0 font-weight-medium text-primary">Policy Objectives</h6>
                            {% for i in object.polobj_objects.all %}
                                <ol class="list-group list-group-numbered">
                                    <li class="list-group-item d-flex justify-content-between align-items-start">
                                    <div class="ms-2 me-auto">
                                        <div class="fw-bold">
                                            <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseTwo"
                                                aria-expanded="true" aria-controls="collapseTwo" style="padding-left: 0px; color: #858796;">
                                                <i class="fa fa-plus-square"></i>
                                                <span>{{ i.polobj }}</span>
                                            </a>
                                        </div>
                                        <div id="collapseTwo" class="collapse " aria-labelledby="headingTwo" data-parent="#accordionSidebar">
                                            <div class="bg-black py-2 collapse-inner rounded">
                                                <p class="collapse-item ">{{ i.polobj_desc }}</p>
                                                <!-- <a target="_blank" rel="nofollow" href="{{ t.layer }}">Link to Source &rarr;</a> -->
                                            </div>
                                        </div>
                                    </div>
                                    <!-- <span class="badge bg-light">{{ t.pressure_type }}</span> -->
                                    </li>
                                </ol>
                            {% endfor %}
                        </div>
                        
                        
                    </div>
                    <!-- 1.3 -->
                    <div class="card shadow mb-4">
                        <div class="card-header py-3">
                            <h6 class="m-0 font-weight-bold text-primary">{% get_verbose_field_name object "ecosystem_services" %}</h6>
                        </div>
                        <div class="card-body">
                            <p>{{object.ecosystem_services }}</p>
                        </div>
                    </div> 
                    <!-- 1.4 -->
                    <div class="card shadow mb-4">
                        <div class="card-header py-3">
                            <h6 class="m-0 font-weight-bold text-primary">{% get_verbose_field_name object "future_scenarios" %}</h6>
                        </div>
                        <div class="card-body"> 
                            {{ object.future_scenarios |slice:":380" }}
                            <span id="dots6">...</span>
                            <span id="more6">{{ object.future_scenarios |slice:"380:"}}</span>
                            <button id="btn6" onclick="myFunction6()"><i class="fas fa-chevron-right"></i></button>
                        </div>
                        <div class="card-body">
                            <h6 class="m-0 font-weight-medium text-primary">Future Scenarios</h6>
                            {% for i in object.futscen_objects.all %}
                                <ol class="list-group list-group-numbered">
                                    <li class="list-group-item d-flex justify-content-between align-items-start">
                                    <div class="ms-2 me-auto">
                                        <div class="fw-bold">
                                            <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseTwo"
                                                aria-expanded="true" aria-controls="collapseTwo" style="padding-left: 0px; color: #858796;">
                                                <i class="fa fa-plus-square"></i>
                                                <span>{{ i.future_scen }}</span>
                                            </a>
                                        </div>
                                        <div id="collapseTwo" class="collapse " aria-labelledby="headingTwo" data-parent="#accordionSidebar">
                                            <div class="bg-black py-2 collapse-inner rounded">
                                                <p class="collapse-item ">{{ i.future_scen_desc }}</p>
                                                <!-- <a target="_blank" rel="nofollow" href="{{ t.layer }}">Link to Source &rarr;</a> -->
                                            </div>
                                        </div>
                                    </div>
                                    <!-- <span class="badge bg-light">{{ t.pressure_type }}</span> -->
                                    </li>
                                </ol>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- right column phase1 -->
        <div class="col-lg-5 mb-4">
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">EEA classification for Marine Ecosystem Services</h6>
                </div>
                <div class="card-body">
                    {% for i in object.es_type %}
                        <p><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
                            <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/>
                            </svg> {{ i }}
                        </p> <br>
                    {% endfor %}                
                </div>
            </div>


        </div>

        
        <!-- Phase2 -->
        <div class="col-lg-12 mb-4">
            <div class="card bg-success text-white shadow">
                <div id="phase_2" class="card-body">
                    Risk Identification
                    <div class="text-white-50 small">Phase 2</div>
                </div>
            </div>
        </div>
        <!-- present e future -->
        <div class="col-lg-12 mb-4">
           
            <div class="row">
                <!-- left present condition --> 
                <div class="col-lg-6 mb-4">
                    {% for i in object.phase2.all %}
                        {% if "Present Condition" in i.condition_type %}    
                            <h5 style ="display: inline;"><span class="badge badge-secondary">2.1 {{i.condition_type}}</span></h5>
                           <!-- 2.2 -->
                           <div class="card shadow mb-4">
                            <div class="card-header py-3">
                                <h6 class="m-0 font-weight-bold text-primary">Description of th Present Conditions</h6>
                            </div>
                            <div class="card-body"> 
                                {{ i.description  |slice:":380" }}
                                <span id="dots4">...</span>
                                <span id="more4">{{ i.description |slice:"380:"}}</span>
                                <button id="btn4" onclick="myFunction4()"><i class="fas fa-chevron-right"></i></button>
                            </div>
                        </div>
                        <!-- 2.3 -->
                        <div class="card shadow mb-4">
                            <div class="card-header py-3">
                                <h6 class="m-0 font-weight-bold text-primary">2.3 Define main pressures / effects</h6>
                            </div>
                            <div class="card-body"> 
                                {{ i.main_pressures_effects |slice:":380" }}
                                <span id="dots5">...</span>
                                <span id="more5">{{ i.main_pressures_effects |slice:"380:"}}</span>
                                <button id="btn5" onclick="myFunction5()"><i class="fas fa-chevron-right"></i></button>
                            </div>
                            <div class="card-body">
                                <h6 class="m-0 font-weight-medium text-primary">Pressures</h6>
                                {% for t in i.phase2pressures_objects.all %}
                                    <ol class="list-group list-group-numbered">
                                        <li class="list-group-item d-flex justify-content-between align-items-start">
                                        <div class="ms-2 me-auto">
                                            <div class="fw-bold">
                                                <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseTwo"
                                                    aria-expanded="true" aria-controls="collapseTwo" style="padding-left: 0px; color: #858796;">
                                                    <i class="fa fa-plus-square"></i>
                                                    <span>{{ t.pressure_list.label }} - {{ t.pressure_list.code }}</span>
                                                </a>
                                            </div>
                                            <div id="collapseTwo" class="collapse " aria-labelledby="headingTwo" data-parent="#accordionSidebar">
                                                <div class="bg-black py-2 collapse-inner rounded">
                                                    <p class="collapse-item ">{{ t.pressure_description | richtext }}</p>
                                                    <a target="_blank" rel="nofollow" href="{{ t.data_source }}">Link to Source &rarr;</a> <br>
                                                    <a target="_blank" rel="nofollow" href="{{ t.layer }}">Link to Layer &rarr;</a>
                                                </div>
                                            </div>
                                        </div>
                                        <span class="badge bg-light">{{ t.pressure_type }}</span>
                                        </li>
                                    </ol>
                                {% endfor %}
                            </div>
                            <!-- <div class="card-body">
                                <h6 class="m-0 font-weight-medium text-primary">Pressures Description</h6>
                                <p>{{ i.pressure_description | richtext }} </p>
                            </div>
                            <div class="card-body">
                                <h6 class="m-0 font-weight-medium text-primary">Layer</h6>
                                <p>{{ i.layer | richtext }} </p>
                            </div> -->
                        </div>
                        <!-- 2.4 -->
                        <div class="card shadow mb-4">
                            <div class="card-header py-3">
                                <h6 class="m-0 font-weight-bold text-primary">2.4 Describe main sources of pressures / effects</h6>
                            </div>
                            <div class="card-body"> 
                                {{ i.main_source_effects |slice:":380" }}
                                <span id="dots7">...</span>
                                <span id="more7">{{ i.main_source_effects |slice:"380:"}}</span>
                                <button id="btn7" onclick="myFunction7()"><i class="fas fa-chevron-right"></i></button>
                            </div>
                            <div class="card-body">
                                <h6 class="m-0 font-weight-medium text-primary">Uses</h6>
                                {% for t in i.phase2uses_objects.all %}
                                    <ol class="list-group list-group-numbered">
                                        <li class="list-group-item d-flex justify-content-between align-items-start">
                                        <div class="ms-2 me-auto">
                                            <div class="fw-bold">
                                                <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseTwo"
                                                    aria-expanded="true" aria-controls="collapseTwo" style="padding-left: 0px; color: #858796;">
                                                    <i class="fa fa-plus-square"></i>
                                                    <span>{{ t.use_list.label }}</span>
                                                </a>
                                            </div>
                                            <div id="collapseTwo" class="collapse " aria-labelledby="headingTwo" data-parent="#accordionSidebar">
                                                <div class="bg-black py-2 collapse-inner rounded">
                                                    <p class="collapse-item ">{{ t.use_description | richtext }}</p>
                                                    <a target="_blank" rel="nofollow" href="{{ t.layer }}">Link to Source &rarr;</a>
                                                </div>
                                            </div>
                                        </div>
                                        <span class="badge bg-light">{{ t.use_type }}</span>
                                        </li>
                                    </ol>
                                {% endfor %}
                            </div>
                        </div> 
                        <!-- 2.5 -->
                        <div class="card shadow mb-4">
                            <div class="card-header py-3">
                                <h6 class="m-0 font-weight-bold text-primary">2.5 Describe main environmental responses</h6>
                            </div>
                            <div class="card-body"> 
                                {{ i.main_environmental_responses |slice:":380" }}
                                <span id="dots8">...</span>
                                <span id="more8">{{ i.main_environmental_responses |slice:"380:"}}</span>
                                <button id="btn8" onclick="myFunction8()"><i class="fas fa-chevron-right"></i></button>
                            </div>
                            <div class="card-body">
                                <h6 class="m-0 font-weight-medium text-primary">Environmental Components</h6>
                                {% for t in i.phase2env_objects.all %}
                                    <ol class="list-group list-group-numbered">
                                        <li class="list-group-item d-flex justify-content-between align-items-start">
                                        <div class="ms-2 me-auto">
                                            <div class="fw-bold">
                                                <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseTwo"
                                                    aria-expanded="true" aria-controls="collapseTwo" style="padding-left: 0px; color: #858796;">
                                                    <i class="fa fa-plus-square"></i>
                                                    <span>{{ t.env_list.label }}</span>
                                                </a>
                                            </div>
                                            <div id="collapseTwo" class="collapse " aria-labelledby="headingTwo" data-parent="#accordionSidebar">
                                                <div class="bg-black py-2 collapse-inner rounded">
                                                    <p class="collapse-item ">{{ t.env_description | richtext }}</p>
                                                    <!-- <a target="_blank" rel="nofollow" href="{{ t.layer }}">Link to Source &rarr;</a> -->
                                                </div>
                                            </div>
                                        </div>
                                        <!-- <span class="badge bg-light">{{ t.use_type }}</span> -->
                                        </li>
                                    </ol>
                                {% endfor %}
                            </div>
                        </div>

                        <!-- 2.6 -->
                        <div class="card shadow mb-4">
                            <div class="card-header py-3">
                                <h6 class="m-0 font-weight-bold text-primary">2.6 Source / Pressure / Pathway / Receptor Relationships</h6>
                            </div>
                            <div class="card-body"> 
                                {{ i.impact_chain |slice:":380" }}
                                <span id="dots9">...</span>
                                <span id="more9">{{ i.impact_chain |slice:"380:"}}</span>
                                <button id="btn9" onclick="myFunction9()"><i class="fas fa-chevron-right"></i></button>
                            </div>
                            <!-- <div class="card-body">
                                <h6 class="m-0 font-weight-medium text-primary">Environmental Components</h6>
                                {% for t in i.phase2env_objects.all %}
                                    <ol class="list-group list-group-numbered">
                                        <li class="list-group-item d-flex justify-content-between align-items-start">
                                        <div class="ms-2 me-auto">
                                            <div class="fw-bold">
                                                <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseTwo"
                                                    aria-expanded="true" aria-controls="collapseTwo" style="padding-left: 0px; color: #858796;">
                                                    <i class="fa fa-plus-square"></i>
                                                    <span>{{ t.env_list.label }}</span>
                                                </a>
                                            </div>
                                            <div id="collapseTwo" class="collapse " aria-labelledby="headingTwo" data-parent="#accordionSidebar">
                                                <div class="bg-black py-2 collapse-inner rounded">
                                                    <p class="collapse-item ">{{ t.env_description | richtext }}</p>
                                                    <a target="_blank" rel="nofollow" href="{{ t.layer }}">Link to Source &rarr;</a>
                                                </div>
                                            </div>
                                        </div>
                                        <span class="badge bg-light">{{ t.use_type }}</span>
                                        </li>
                                    </ol>
                                {% endfor %}
                            </div> -->
                        </div>



                        {% endif %}
                    {% endfor %}       
                </div>
                <div class="col-lg-6 mb-4">
                    {% for i in object.phase2.all %}
                        {% if "Future Condition" in i.condition_type %}    
                            <h5 style ="display: inline;"><span class="badge badge-secondary">2.2 {{i.condition_type}}</span></h5>
                            <!-- 2.2 -->
                            <div class="card shadow mb-4">
                                <div class="card-header py-3">
                                    <h6 class="m-0 font-weight-bold text-primary">Description of th Future Conditions or Scenarios</h6>
                                </div>
                                <div class="card-body">
                                    <p>{{ i.description }}</p>
                                </div>
                            </div>
                            <!-- 2.3 -->
                            <div class="card shadow mb-4">
                                <div class="card-header py-3">
                                    <h6 class="m-0 font-weight-bold text-primary">2.3 Define main pressures / effects</h6>
                                </div>
                                <div class="card-body">
                                    <p>{{ i.main_pressures_effects | richtext }} </p>
                                </div>
                                <div class="card-body">
                                    <h6 class="m-0 font-weight-medium text-primary">Main Pressures</h6>
                                    
                                    {% for t in i.pressure_list.all %}
    
                                        <ol class="list-group list-group-numbered">
                                            <li class="list-group-item d-flex justify-content-between align-items-start">
                                            <div class="ms-2 me-auto">
                                                <div class="fw-bold">
                                                    <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseTwo"
                                                        aria-expanded="true" aria-controls="collapseTwo" style="padding-left: 0px; color: #858796;">
                                                        <i class="fa fa-plus-square"></i>
                                                        <span>{{ t.label }}</span>
                                                    </a>
                                                
                                                </div>
                                                <div id="collapseTwo" class="collapse " aria-labelledby="headingTwo" data-parent="#accordionSidebar">
                                                    <div class="bg-black py-2 collapse-inner rounded">
                                                        <p class="collapse-item ">{{ t.description }}</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <span class="badge bg-light">{{ t.code }}</span>
                                            </li>
                                        </ol>
                                    {% endfor %}
                                </div>
                                <div class="card-body">
                                    <h6 class="m-0 font-weight-medium text-primary">Pressures Description</h6>
                                    <p>{{ i.pressure_description | richtext }} </p>
                                </div>
                                <div class="card-body">
                                    <h6 class="m-0 font-weight-medium text-primary">Layer</h6>
                                    <p>{{ i.layer | richtext }} </p>
                                </div>
                            </div>
                            <!-- 2.4 -->
                            <div class="card shadow mb-4">
                                <div class="card-header py-3">
                                    <h6 class="m-0 font-weight-bold text-primary">2.4 Describe main sources of pressures / effects</h6>
                                </div>
                                <div class="card-body">
                                    <p>{{i.main_source_effects | richtext }}</p>
                                </div>
                            </div> 
                            <!-- 2.5 -->
                            <div class="card shadow mb-4">
                                <div class="card-header py-3">
                                    <h6 class="m-0 font-weight-bold text-primary">2.5 Describe main environmental responses</h6>
                                </div>
                                <div class="card-body">
                                    <p>{{ i.main_environmental_responses | richtext }} </p>
                                </div>
                            </div>
                        {% endif %}
                    {% endfor %}       
                </div>
            </div>
        </div>

        <!-- Phase3 -->
        <div class="col-lg-12 mb-4">
            <div class="card bg-info text-white shadow">
                <div id="phase_3" class="card-body">
                    Risk Analysis
                    <div class="text-white-50 small">Phase 3</div>
                </div>
            </div>
        </div>
        <!-- Phase4 -->
        <div class="col-lg-12 mb-4">
            <div class="card bg-warning text-white shadow">
                <div id="phase" class="card-body">
                    Risk Evaluation
                    <div class="text-white-50 small">Phase 4</div>
                </div>
            </div>
        </div>

    </div>

{% endblock %}

